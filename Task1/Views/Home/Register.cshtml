@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Kendo UI using CDN</title>

    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/themes/7.0.2/default/default-main.css" />

    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://unpkg.com/jszip/dist/jszip.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2023.3.1114/js/kendo.all.min.js"></script>
    <style>

        #back-page {
            background: background: rgb(131,58,180);
            background: linear-gradient(90deg, rgba(131,58,180,1) 23%, rgba(253,29,29,1) 69%, rgba(252,176,69,1) 100%);
            background-position: center center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        .signup-image {
            width: 100%;
            height: 100%; /* Set image height to 100% */
            object-fit: cover;
            margin: 0; /* Remove any margin */
        }

        .k-picker-solid {
            border-color: rgba(0, 0, 0, 0.08);
            color: #424242;
            background-color: #fff;
            /* background-image: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.02)); */
        }

        /*  .container {
                                    width: 35%;
                                    margin-top: 1%;
                                    background-color: white;
                                } */
        .container {
            display: flex;
            margin-top: 1%;
            justify-content: center;
            align-items: center;
            /*             height: 100vh;
                         */
        }

        .k-input-md .k-input-inner, .k-picker-md .k-input-inner {
            padding-block: 0.2em;
        }

        .signup-form {
            background-color: #ffffff;
            padding: 30px; /* Added padding to the form */
        }

        input {
            width: 100%;
            padding: 0.5em;
            padding-inline: 8px;
            margin: 5px 0 22px 0;
            display: inline-block;
            border: 1px solid #c9c9c9;
            background: rgba(0, 0, 0, 0);
            outline: 0;
            box-sizing: border-box;
            box-shadow: 0px 2px 5px 0px rgb(0 0 0 / 12%)
        }


        .transparent-form {
            background-color: rgba(255, 255, 255, 0.7); /* Adjust the transparency level as needed */
            padding: 20px;
            margin: 20px;
            border-radius: 10px;
            margin: auto;
        }

        .signup-card {
            width: 100%;
            max-width: 800px; /* Adjusted max-width for better image visibility */
            border: none;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            border-radius: 15px;
        }

        h1 {
            background: rgb(131,58,180);
            background: linear-gradient(90deg, rgba(131,58,180,1) 23%, rgba(253,29,29,1) 69%, rgba(252,176,69,1) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        h1 {
            font-family: cursive;
        }

        hr {
            border: 1px solid #f1f1f1;
            margin-bottom: 25px;
        }

        .rbtn {
            background-color: rgba(15, 23, 43, .9);
            color: white;
            font-size: 20px;
            padding: 10px 20px;
            border-radius: 5px;
            width: 100%;
        }

        .error {
            color: red;
            font-size: 90%;
        }

        input[type=text] {
            outline: none;
        }

        .input-3 {
            border: 1px solid #01cc40 !important;
        }

        .input-4 {
            border: 1px solid red;
        }

        .cylindrical-btn {
            display: inline-block;
            padding: 20px 50px; /* Adjust padding for button size */
            border-radius: 50px; /* Use a large value for a cylindrical shape */
            background-color: #ff8c00; /* Orange color */
            color: #fff; /* Text color */
            text-align: center;
            text-decoration: none;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

            /* Add hover effect for dark orange color */
            .cylindrical-btn:hover {
                background-color: #c66b00; /* Dark orange color */
                transform: scale(1.05); /* Slightly scale up on hover */
            }

        .k-input-md, .k-picker-md {
            font-size: 17px;
            line-height: 1.4285714286;
        }

        .fieldlist {
            margin: 0 0 -1em;
            padding: 0;
        }

            .fieldlist li {
                list-style: none;
                padding-bottom: 1em;
                display: inline-block;
            }

        .card {
            width: 500px; /* Adjust as needed */
            border: 1px solid #ccc;
            height: 100%;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

            .card img {
                width: 100%; /* Ensures the image fills the card */
                height: auto; /* Maintains aspect ratio */
                display: block;
            }
    </style>
</head>

<body id="back-page">
    <section style="background-color: #fff;">
        <div class="row d-flex justify-content-center align-items-center h-100">
            @*                 <div class="col-lg-12 col-xl-11">
            *@@*                     <div class="card text-black" style="border-radius: 25px;">
            *@
            <div class="row justify-content-center">
                <div class="col-md-7 col-sm-12 col-lg-7 order-2">
                    <div class="card-body signup-form">
                        <div class="transparent-form">
                            <form class="p-2" id="registrationForm" method="post" asp-action="Register">


                                <h1 class="text-center fw-bold" style="font-size:45px; color:#6b80b2">Register </h1>
                                <hr>
                                <label><b>Name</b></label>
                                <input id="name" name="name" type="text" class="" placeholder=" Enter Name">
                                <div class="error" id="nameErr"></div>

                                <label class="mt-3"><b>Phone</b></label>
                                <input id="phone" name="phone" type="number" class="k-input-value-text" placeholder="Phone no ">
                                <div class="error" id="phoneErr"></div>

                                <label class="mt-3"><b>Email</b></label>
                                <input id="email" name="email" type="text" class="k-input-value-text" placeholder="Enter Email">
                                <div class="error" id="emailErr"></div>
                                <label class="mt-3"><b>Password</b></label>
                                <input type="password"  id="password" name="password" type="text" class="k-input-value-text" placeholder="Enter Password">
                                <div class="error" id="passwordErr"></div>

                                <label class="mt-3"><b>DOB</b></label>
                                <input id="datepick" name="dob" type="date">
                                <label class="mt-3" for="role">Role:</label>
                                <select id="role" name="role">
                                    <option value="admin">Admin</option>
                                    <option value="employee">Employee</option>
                                </select>

                                <div style="padding-top: 54px;">

                                    <label for="Cities">City:</label>
                                    <input id="Cities" name="city" onchange="cityChanged()" />
@*                                     <div class="error" id="CitiesErr"></div>
 *@

                                    </br>


                                    <label for="States">State:</label>
                                    <input id="States" name="state" onchange="stateChanged()" />
@*                                     <div class="error" id="StatesErr"></div>
 *@
                                    </br>



                                </div>


                                <label class="mt-3"><b>Address</b></label>
                                <textarea id="textarea" name="address" data-max-msg="Enter value between 1 and 200"></textarea>



                                <label class="mt-3"><b>Choose any Color</b></label>
                                <input id="picker" />
                                <hr>

                                <button type="submit" class="cylindrical-btn btn btn-rounded fw-bold contain " style="color:aliceblue">Register</button>


                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-5  d-flex align-items-center order-1">

                    <img src="~/user-verification-unauthorized-access-prevention-private-account-authentication-cyber-security-people-entering-login-password-safety-measures_335657-3530.jpg"
                         class="img-fluid" alt="Sample image">

                </div>
            </div>
        </div>
    </section>
    <script>
        var dataSource = new kendo.data.DataSource(); function cityChanged() {
            var selectedCityId = $("#Cities").val();
            console.log("Selected city ID:", selectedCityId);
        }

        function stateChanged() {
            var selectedStateId = $("#States").val();
            console.log("Selected state ID:", selectedStateId);

            $.ajax({
                url: '/Home/cities/',
                method: 'GET',
                data: { stId: selectedStateId },
                dataType: 'json',
                success: function (data) {
                    // Update dataSource with the returned data
                    dataSource.data(data);
                },
                error: function (error) {
                    console.error('Error fetching city data:', error);
                }
            });
        }



        $("#radiogroup").kendoRadioGroup({
            items: ["FEMALE", "MALE"],
            layout: "horizontal",
            value: "FEMALE",
            name: "gender"
        });
        $("#datepick").kendoDatePicker({
            dateInput: true,
            animation: {
                close: {
                    effects: "fadeOut zoom:out",
                    duration: 500
                },
                open: {
                    effects: "fadeIn zoom:in",
                    duration: 300
                }
            },

        });


        $("#textarea").kendoTextArea({
            rows: 4,
            maxLength: 200,
            placeholder: "Please fill your full address..."
        });
        $('#eq1').kendoCheckBox({
            size: "large",
            checked: true,
            label: "English"
        });


        $("#picker").kendoColorPicker({
            value: "#0F172B",
            buttons: false,
            select: function (e) {
                var color = e.value;
                var gradientColor = "rgba(" + parseInt(color.slice(-6, -4), 16) + "," + parseInt(color.slice(-4, -2), 16) + "," + parseInt(color.slice(-2), 16) + ",0.9)";
                $("#back-page").css("background", "linear-gradient(" + gradientColor + ", " + gradientColor + "), url('../img11.jpg')"); // Set background with updated gradient color
            }
        });


        var pro = $("#States").kendoDropDownList({
            // autoBind: false,
            // cascadeFrom: "categories",
            optionLabel: "Select State...",
            dataTextField: "name",
            dataValueField: "id",
            filter: "contains",

            autoSearch: true,
            dataSource: {
                type: "json",
                // serverFiltering: true,
                transport: {
                    read: "/Home/state",
                    // data: { stId: selectedStateId },
                }
            },
            noDataTemplate: '<div>No records found. <button id="addNew">Add</button></div>',
            dataBound: function (e) {
                var dropdown = this;
                $("#addNew").on("click", function () {
                    var newItem = prompt("Enter the new item:");
                    if (newItem) {

                        $.ajax({
                            url: "/Home/AddItem",
                            method: "POST",
                            data: { newItem: newItem },
                            success: function (response) {

                                dropdown.dataSource.add({ id: response.id, name: newItem });

                                dropdown.value(response.id);
                            },

                        });
                    }
                });
            }
        }).data("kendoDropDownList");

        var citiesDropdown = $("#Cities").kendoDropDownList({
            filter: "contains",
            optionLabel: "Select city...",
            dataTextField: "name",
            dataValueField: "id",
            dataSource: dataSource, // Use the dataSource variable here
            noDataTemplate: '<div>No records found. <button id="addNewCity">Add</button></div>'
        }).data("kendoDropDownList");



        $(document).on("click", "#addNewCity", function () {
            var newStateId = $("#States").val();
            var newCityName = prompt("Enter the name of the new city:");
            if (newCityName) {
                $.ajax({
                    url: "/Home/AddCity", 
                    type: "POST",
                    data: { stateId: newStateId, newCityName: newCityName },
                    success: function (response) {

                        citiesDropdown.dataSource.read();
                    },
                    error: function (xhr, status, error) {

                        console.error("Error adding city:", error);
                    }

                });
            }
        });


        // $("#d").on("submit", function (e) {
        // e.preventDefault();

        // console.log(" NAME:", $('#name').val());
        // console.log(" NAME:", $('#phone').val());
        // console.log(" NAME:", $('#email').val());
        // console.log(" NAME:", $('#datepick').val());
        // console.log(" NAME:", $("#Cities").val());
        // console.log(" NAME:", $('#States').val());
        // console.log(" NAME:", $('#textarea').val());
        // console.log(" NAME:", $('#gender').val());

        // })
        $(document).ready(function () {
            $('#name, #email, #phone, #Citiies, #States').on('keyup', function () {
                validateField($(this));
            });

            function validateField(field) {
                var fieldName = field.attr('id');
                var fieldValue = field.val().trim();
                var errorId = fieldName + 'Err';
                var isValid = true;

                switch (fieldName) {
                    case 'name':
                        if (fieldValue === '') {
                            printError(errorId, 'Please enter your name');
                            isValid = false;
                        } else if (!/^[a-zA-Z]+$/.test(fieldValue)) {
                            printError(errorId, 'Please enter a valid name');
                            isValid = false;
                        } else {
                            printError(errorId, '');
                        }
                        break;
                    case 'email':
                        var emailRegex = /^\S+@@\S+\.\S+$/;
                        if (!emailRegex.test(fieldValue)) {
                            printError(errorId, 'Please enter a valid email address');
                            isValid = false;
                        } else {
                            printError(errorId, '');
                        }
                        break;
                    case 'phone':
                        var phoneRegex = /^[1-9]\d{9}$/;
                        if (!phoneRegex.test(fieldValue)) {
                            printError(errorId, 'Please enter a valid 10 digit mobile number');
                            isValid = false;
                        } else {
                            printError(errorId, '');
                        }
                        break;
                    case 'Cities':
                        if (fieldValue === 'Select city...') {
                            printError(errorId, 'Please select your ' + fieldName);
                            isValid = false;
                        } else {
                            printError(errorId, '');
                        }
                        break;

                    case 'States':
                        if (fieldValue === 'Select State...') {
                            printError(errorId, 'Please select your ' + fieldName);
                            isValid = false;
                        } else {
                            printError(errorId, '');
                        }
                        break;
                }

                field.toggleClass('input-3', isValid).toggleClass('input-4', !isValid);
            }

            function printError(elemId, errMsg) {
                $('#' + elemId).text(errMsg);
            }

            $('#registrationForm').on('submit', function (event) {
                event.preventDefault();
                var ci = citiesDropdown.text();
                var st = pro.text();
                $("#Cities").val(ci);
                $("#States").val(st);
                var isFormValid = true;

                $('#name, #email, #phone, #Cities, #States').each(function () {
                    validateField($(this));
                });

                $('.error').each(function () {
                    if ($(this).text() !== '') {
                        isFormValid = false;
                        return false;
                    }
                });

                if (isFormValid) {
                    this.submit();
                }
            });
        });


        function cate(e) {
            console.log("hello");
            console.log(e);
        }

    </script>
</body>
</html>
